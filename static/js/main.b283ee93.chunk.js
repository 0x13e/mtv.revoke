(this["webpackJsonpmtv-revoke"]=this["webpackJsonpmtv-revoke"]||[]).push([[0],{140:function(e,t,n){e.exports=n(225)},163:function(e,t){},173:function(e,t){},200:function(e,t){},202:function(e,t){},223:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(28),o=n.n(s),c=n(2),i=n.n(c),u=n(14),p=n(5),l=n(7),d=n(12),m=n(9),h=n(13),f=(n(95),n(67)),v=n.n(f),b=n(20),k=n(18),y=n(130),g=n.n(y),w=n(47),x=n(36),A=n(131),E=n(132),O=A.abi,N=E.abi,j=[{constant:!0,inputs:[{internalType:"address",name:"_t2crAddress",type:"address"},{internalType:"address[]",name:"_tokenAddresses",type:"address[]"}],name:"getTokensIDsForAddresses",outputs:[{internalType:"bytes32[]",name:"result",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_t2crAddress",type:"address"},{internalType:"bytes32[]",name:"_tokenIDs",type:"bytes32[]"}],name:"getTokens",outputs:[{components:[{internalType:"bytes32",name:"ID",type:"bytes32"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"ticker",type:"string"},{internalType:"address",name:"addr",type:"address"},{internalType:"string",name:"symbolMultihash",type:"string"},{internalType:"enum IArbitrableTokenList.TokenStatus",name:"status",type:"uint8"},{internalType:"uint256",name:"decimals",type:"uint256"}],internalType:"struct TokensView.Token[]",name:"tokens",type:"tuple[]"}],payable:!1,stateMutability:"view",type:"function"}],T=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"initialAddressSet",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"addr",type:"address"}],name:"endGrantAuthentication",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"addr",type:"address"}],name:"revokeAuthentication",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"pending",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"contracts",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"delegateProxyImplementation",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"proxies",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"addr",type:"address"}],name:"startGrantAuthentication",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"registerProxy",outputs:[{name:"proxy",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"DELAY_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"authAddress",type:"address"}],name:"grantInitialAuthentication",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"}],name:"OwnershipRenounced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}],C="https://raw.githubusercontent.com/trustwallet/assets/master/blockchains",S="0x0000000000000000000000000000000000000000000000000000000000000000",B="0x0000000000000000000000000000000000000000",I="0x0000000000000000000000000000000000000001",R="0xEbcf3bcA271B26ae4B162Ba560e243055Af0E679";function D(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getNetwork();case 2:if(a=e.sent,1!==a.chainId){e.next=8;break}return e.next=7,P(t,n);case 7:return e.abrupt("return",e.sent);case 8:if(r){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",F(t,r));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(i.a.mark((function e(t,n){var r,a,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new b.Contract("0xf9b9b5440340123B21BFf1dDAFE1ad6Feb9D6E7F",j,n),e.next=3,r.functions.getTokensIDsForAddresses(R,[t]);case 3:return a=e.sent,s=Object(x.a)(a,1),o=s[0],e.abrupt("return",o&&o[0]&&o[0]!==S);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==t[Object(k.getAddress)(e)]}function Z(e){return"".concat(e.substr(0,6),"...").concat(e.substr(e.length-4,4))}function U(e,t){e=b.BigNumber.from(e),t=b.BigNumber.from(t);var n=e.sub(t);return n.isZero()?0:n.lt(0)?-1:1}function H(e,t){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,v.a.get("".concat("/dapp-contract-list","/").concat(n,"/").concat(Object(k.getAddress)(t),".json"));case 5:return r=e.sent,a=r.data,e.abrupt("return",a.appName);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function z(e,t){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.lookupAddress(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function G(e){return{1:"https://etherscan.io/address",3:"https://ropsten.etherscan.io/address",4:"https://rinkeby.etherscan.io/address",5:"https://goerli.etherscan.io/address",6:"https://blockscout.com/etc/kotti/address",10:"https://optimistic.etherscan.io/address",30:"https://blockscout.com/rsk/mainnet/address",42:"https://kovan.etherscan.io/address",56:"https://bscscan.com/address",61:"https://blockscout.com/etc/mainnet/address",63:"https://blockscout.com/etc/mordor/address",77:"https://blockscout.com/poa/sokol/address",97:"https://testnet.bscscan.com/address",99:"https://blockscout.com/poa/core/address",100:"https://blockscout.com/poa/xdai/address",137:"https://explorer-mainnet.maticvigil.com/address",1e4:"https://smartscan.cash/address",42161:"https://arbiscan.io/address",43113:"https://cchain.explorer.avax-test.network/address",43114:"https://cchain.explorer.avax.network/address",62621:"https://e.mtv.ac/address",80001:"https://explorer-mumbai.maticvigil.com/address"}[e]}function V(e){return{1:"ethereum",56:"smartchain",61:"classic"}[e]}function q(e){return{1:"ethereum",56:"smartchain",100:"xdai",137:"matic",1e4:"smartbch",42161:"arbitrum",43114:"avalanche",62621:"multivac"}[e]}function Y(e){return X.apply(this,arguments)}function X(){return(X=Object(u.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,"ERC20");case 2:return n=e.sent,e.next=5,J(t,"ERC721");case 5:if(r=e.sent,void 0!==n||void 0!==r){e.next=8;break}return e.abrupt("return",void 0);case 8:return a=Object(w.a)({},r,{},n),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(u.a)(i.a.mark((function e(t){var n,r,a,s,o,c,u,p,l,d,m,h=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:"ERC20",r=Q(t,n)){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,v.a.get(r);case 7:for(a=e.sent,s=a.data.tokens,o={},c=!0,u=!1,p=void 0,e.prev=13,l=s[Symbol.iterator]();!(c=(d=l.next()).done);c=!0)m=d.value,o[Object(k.getAddress)(m.address)]=m;e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),u=!0,p=e.t0;case 21:e.prev=21,e.prev=22,c||null==l.return||l.return();case 24:if(e.prev=24,!u){e.next=27;break}throw p;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",o);case 32:return e.prev=32,e.t1=e.catch(4),e.abrupt("return",void 0);case 35:case"end":return e.stop()}}),e,null,[[4,32],[13,17,21,29],[22,,24,28]])})))).apply(this,arguments)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ERC20",n={ERC20:{1:"https://tokens.1inch.eth.link/",10:"https://static.optimism.io/optimism.tokenlist.json",56:"https://raw.githubusercontent.com/pancakeswap/pancake-swap-interface/master/src/constants/token/pancakeswap.json",100:"https://tokens.honeyswap.org",137:"https://unpkg.com/quickswap-default-token-list@1.0.28/build/quickswap-default.tokenlist.json",42161:"https://bridge.arbitrum.io/token-list-42161.json",43114:"https://raw.githubusercontent.com/pangolindex/tokenlists/main/aeb.tokenlist.json"},ERC721:{1:"https://raw.githubusercontent.com/vasa-develop/nft-tokenlist/master/mainnet_curated_tokens.json"}};return n[t][e]}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(u.a)(i.a.mark((function e(t,n){var r,a,s,o,c,u,p,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:{},s=Object(k.getAddress)(t),o=a[s],c=!(null===o||void 0===o?void 0:null===(r=o.logoURI)||void 0===r?void 0:r.startsWith("/"))&&(null===o||void 0===o?void 0:o.logoURI),u=V(n),p=u&&"".concat(C,"/").concat(u,"/assets/").concat(s,"/logo.png"),l=c||p||"mrc.png",e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return(e/Math.pow(10,t)).toFixed(3)}var ne=n(45),re=n(50),ae=n.n(re),se=n(239),oe=n(241),ce=n(234),ie=n(240),ue=n(235),pe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={allowances:[],loading:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.inputAddress!==e.inputAddress&&this.loadData()}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token){e.next=2;break}return e.abrupt("return");case 2:if(this.props.inputAddress){e.next=4;break}return e.abrupt("return");case 4:return t=this.props.token,n=t.approvals.filter((function(e,n){return n===t.approvals.findIndex((function(t){return e.topics[2]===t.topics[2]}))})),e.next=8,Promise.all(n.map(function(){var e=Object(u.a)(i.a.mark((function e(n){var r,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(k.getAddress)(Object(k.hexDataSlice)(n.topics[2],12)),e.next=3,t.contract.functions.allowance(a.props.inputAddress,r);case 3:if(s=e.sent.toString(),"0.000"!==a.formatAllowance(s)){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,z(r,a.props.provider);case 8:return o=e.sent,c=q(a.props.chainId),e.next=12,H(r,c);case 12:return u=e.sent,"0",e.abrupt("return",{spender:r,ensSpender:o,spenderAppName:u,allowance:s,newAllowance:"0"});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:r=(r=e.sent).filter((function(e){return void 0!==e})).sort((function(e,t){return-1*U(e.allowance,t.allowance)})),this.setState({allowances:r,loading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"revoke",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.update(Object(w.a)({},t,{newAllowance:"0"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token){e.next=2;break}return e.abrupt("return");case 2:return n=b.BigNumber.from(this.fromFloat(t.newAllowance)),r=b.BigNumber.from(t.allowance),a=this.props.token.contract,e.prev=5,console.debug("Calling contract.approve(".concat(t.spender,", ").concat(n.toString(),")")),e.next=9,a.functions.approve(t.spender,n);case 9:s=e.sent,e.next=43;break;case 12:if(e.prev=12,e.t0=e.catch(5),console.debug("failed, code ".concat(e.t0.code)),-32e3!==e.t0.code){e.next=43;break}if(e.prev=16,!(o=r.sub(n)).gte(0)){e.next=25;break}return console.debug("Calling contract.decreaseApproval(".concat(t.spender,", ").concat(o.toString(),")")),e.next=22,a.functions.decreaseApproval(t.spender,o);case 22:s=e.sent,e.next=29;break;case 25:return console.debug("Calling contract.increaseApproval(".concat(t.spender,", ").concat(o.abs().toString(),")")),e.next=28,a.functions.increaseApproval(t.spender,o.abs());case 28:s=e.sent;case 29:e.next=43;break;case 31:if(e.prev=31,e.t1=e.catch(16),console.debug("failed, code ".concat(e.t1.code)),-32e3!==e.t1.code){e.next=43;break}return console.debug("Calling contract.approve(".concat(t.spender,", 0)")),e.next=38,a.functions.approve(t.spender,0);case 38:return s=e.sent,console.debug("Calling contract.approve(".concat(t.spender,", ").concat(n.toString(),")")),e.next=42,a.functions.approve(t.spender,n);case 42:s=e.sent;case 43:if(!s){e.next=49;break}return e.next=46,s.wait(1);case 46:console.debug("Reloading data"),c=this.state.allowances.filter((function(e){return e.spender!==t.spender})),this.setState({allowances:c});case 49:case"end":return e.stop()}}),e,this,[[5,12],[16,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fromFloat",value:function(e){var t=this.props.token.decimals,n=e.split(".");return 1===n.length?e.padEnd(t+e.length,"0"):n.length>2?"0":n[1].length>t?n[0]+n[1].slice(0,t):n[0]+n[1].padEnd(t,"0")}},{key:"formatAllowance",value:function(e){var t=this.props.token,n=t.decimals,r=t.totalSupply,a=b.BigNumber.from(e),s=b.BigNumber.from(r);return a.gt(s)?"Unlimited":te(Number(a),n)}},{key:"render",value:function(){var e=this.props.token,t=e.balance,n=e.decimals;return"0.000"===te(Number(t),n)&&0===this.state.allowances.length?null:a.a.createElement("tr",{className:"Token"},this.renderTokenOrLoading())}},{key:"renderTokenOrLoading",value:function(){return this.state.loading?a.a.createElement(ae.a,{size:20,color:"#000",loading:this.state.loading}):this.renderToken()}},{key:"renderToken",value:function(){return a.a.createElement("div",{className:"TokenContentDiv"},a.a.createElement("table",{className:"TokenContentTable"},a.a.createElement("tbody",null,this.renderAllowanceList())))}},{key:"renderTokenBalance",value:function(){var e,t=this.props.token,n=t.symbol,r=t.balance,s=t.decimals,o=t.contract,c="".concat((e=this.props.chainId,{62621:"https://e.mtv.ac/token"}[e]),"/").concat(o.address);return a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",{className:"tokenName"},a.a.createElement("a",{href:c,style:{color:"white"}},n)),a.a.createElement("td",{className:"tokenValue"}," ",te(Number(r),s)))}},{key:"renderAllowanceList",value:function(){var e=this;if(0===this.state.allowances.length)return a.a.createElement("tr",null,a.a.createElement("td",{className:"tokenIconColumn"}),a.a.createElement("td",{className:"tokenDataColumn"},a.a.createElement("table",{className:"tokenDataTable"},a.a.createElement("tbody",null,this.renderTokenBalance(),a.a.createElement("tr",{className:"spenderRow"},a.a.createElement("td",{className:"spenderRevoke"}),a.a.createElement("td",{className:"spenderAddress",colSpan:2},a.a.createElement("span",{className:"monospace"},"No Spenders")))))));var t=this.state.allowances.map((function(t,n){return e.renderAllowance(t,n)}));return a.a.createElement("tr",null,a.a.createElement("td",{className:"tokenIconColumn"}),a.a.createElement("td",{className:"tokenDataColumn"},a.a.createElement("table",{className:"tokenDataTable"},a.a.createElement("tbody",null,this.renderTokenBalance(),t))))}},{key:"renderAllowance",value:function(e,t){var n=e.spenderAppName||e.ensSpender||e.spender,r=e.spenderAppName||e.ensSpender||Z(e.spender),s=G(this.props.chainId),o=s?a.a.createElement("a",{className:"monospace",href:"".concat(s,"/").concat(e.spender)},r):r,c=s?a.a.createElement("a",{className:"monospace",href:"".concat(s,"/").concat(e.spender)},n):n;return a.a.createElement("tr",{className:"spenderRow"},a.a.createElement("td",{className:"spenderRevoke"},a.a.createElement(se.a,{inline:!0,className:"Allowance",key:e.spender}," ",this.renderRevokeButton(e))),a.a.createElement("td",{className:"spenderAddress"},a.a.createElement("span",{className:"AllowanceTextBigScreen"},c),a.a.createElement("span",{className:"AllowanceTextSmallScreen"},o)),a.a.createElement("td",{className:"spenderLimit"},a.a.createElement("span",{className:"monospace"}," ",this.formatAllowance(e.allowance))))}},{key:"renderRevokeButton",value:function(e){var t=this,n=this.props.inputAddress===this.props.signerAddress,r=a.a.createElement(oe.a,{size:"sm",disabled:!n,className:"RevokeButton",onClick:function(){return t.revoke(e)}});if(!n){var s=a.a.createElement(ce.a,{id:"revoke-tooltip-".concat(this.props.token.contract.address)},"You can only revoke allowances of the connected account");r=a.a.createElement(ie.a,{overlay:s},a.a.createElement("td",null,a.a.createElement("span",null,r)))}return r}},{key:"renderUpdateInputGroup",value:function(e,t){var n=this,r=this.props.inputAddress===this.props.signerAddress,s=a.a.createElement(ue.a,{size:"sm"},a.a.createElement(se.a.Control,{type:"text",size:"sm",className:"NewAllowance",value:this.state.allowances[t].newAllowance,onChange:function(r){var a=n.state.allowances.slice();a[t]=Object(w.a)({},e,{newAllowance:r.target.value}),n.setState({allowances:a})}}),a.a.createElement(ue.a.Append,null,a.a.createElement(oe.a,{disabled:!r,className:"UpdateButton",onClick:function(){return n.update(e)}},"Update")));if(!r){var o=a.a.createElement(ce.a,{id:"update-tooltip-".concat(this.props.token.contract.address)},"You can only update allowances of the connected account");s=a.a.createElement(ie.a,{overlay:o},a.a.createElement("span",null,s))}return s}}]),t}(r.Component);function le(e,t){return de.apply(this,arguments)}function de(){return(de=Object(u.a)(i.a.mark((function e(t,n){var r,a,s,o,c,u,p,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=3,t.functions.totalSupply();case 3:return a=e.sent.toString(),e.next=6,t.functions.balanceOf(n);case 6:if(s=e.sent,!((o=r[Object(k.getAddress)(t.address)])&&o.symbol&&o.decimals)){e.next=13;break}return c=o.symbol,u=o.decimals,e.abrupt("return",{symbol:c,decimals:u,totalSupply:a,balance:s});case 13:return e.next=15,t.symbol();case 15:return p=e.sent,e.next=18,t.functions.decimals();case 18:return l=e.sent,e.abrupt("return",{symbol:p,decimals:l,totalSupply:a,balance:s});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={tokens:[],loading:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.inputAddress!==e.inputAddress&&this.loadData()}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,a,s,o,c,p,l,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.inputAddress){e.next=2;break}return e.abrupt("return");case 2:return this.setState({tokens:[],loading:!0}),t=new k.Interface(O),n=this.props.signer||this.props.provider,e.next=7,this.props.provider.getBlockNumber();case 7:return r=e.sent,e.next=10,this.props.provider.getLogs({fromBlock:0,toBlock:r,topics:[t.getEventTopic("Approval"),Object(k.hexZeroPad)(this.props.inputAddress,32)]});case 10:return a=e.sent,e.next=13,this.props.provider.getLogs({fromBlock:0,toBlock:r,topics:[t.getEventTopic("Transfer"),void 0,Object(k.hexZeroPad)(this.props.inputAddress,32)]});case 13:if(s=e.sent,o=[].concat(Object(ne.a)(a),Object(ne.a)(s)),0!==(c=o.filter((function(e,t){return t===o.findIndex((function(t){return e.address===t.address}))})).map((function(e){return new b.Contract(Object(k.getAddress)(e.address),O,n)}))).length){e.next=19;break}return this.setState({loading:!1}),e.abrupt("return");case 19:return e.next=21,Promise.all(c.map(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.filter((function(e){return e.address===t.address})),e.next=3,D(t.address,d.props.provider,d.props.tokenMapping);case 3:return r=e.sent,e.next=6,$(t.address,d.props.chainId,d.props.tokenMapping);case 6:return s=e.sent,e.prev=7,e.next=10,le(t,d.props.inputAddress,d.props.tokenMapping);case 10:return o=e.sent,e.abrupt("return",Object(w.a)({},o,{icon:s,contract:t,registered:r,approvals:n}));case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}()));case 21:p=e.sent,l=p.filter((function(e){return void 0!==e})).sort((function(e,t){return e.symbol.localeCompare(t.symbol)})),this.setState({tokens:l,loading:!1});case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.loading)return a.a.createElement(ae.a,{css:"margin-bottom: 10px;",size:40,color:"#000",loading:this.state.loading});if(0===this.state.tokens.length)return a.a.createElement("div",{className:"TokenList"},"No token balances");var t=this.state.tokens.filter((function(t){return!e.props.filterRegisteredTokens||t.registered})).filter((function(t){return!e.props.filterZeroBalances||!("0.000"===te(Number(t.balance),t.decimals))})).map((function(t){return a.a.createElement(pe,{key:t.contract.address,token:t,provider:e.props.provider,chainId:e.props.chainId,signer:e.props.signer,signerAddress:e.props.signerAddress,inputAddress:e.props.inputAddress})}));return a.a.createElement("table",{className:"TokenList"},a.a.createElement("tbody",null,t))}}]),t}(r.Component);function he(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(u.a)(i.a.mark((function e(t,n){var r,a,s,o,c,u,p,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=3,ge(t);case 3:return e.next=5,t.functions.balanceOf(n);case 5:if(a=e.sent,!(s=r[Object(k.getAddress)(t.address)])||!s.name){e.next=12;break}return o=s.name,e.abrupt("return",{balance:a,symbol:o});case 12:return e.prev=12,e.next=15,t.functions.name();case 15:return c=e.sent,u=Object(x.a)(c,1),p=u[0],e.abrupt("return",{balance:a,symbol:p});case 21:return e.prev=21,e.t0=e.catch(12),l="???",e.abrupt("return",{balance:a,symbol:l});case 25:case"end":return e.stop()}}),e,null,[[12,21]])})))).apply(this,arguments)}function ve(e,t,n){return be.apply(this,arguments)}function be(){return(be=Object(u.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==r){e.next=2;break}return e.abrupt("return","OpenSea");case 2:return e.abrupt("return",H(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(i.a.mark((function e(t,n){var r,a,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new b.Contract("0xa5409ec958C83C3f309868babACA7c86DCB077c1",T,n),e.next=4,r.functions.proxies(t);case 4:if(a=e.sent,s=Object(x.a)(a,1),(o=s[0])&&o!==B){e.next=9;break}return e.abrupt("return",void 0);case 9:return e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function ge(e){return we.apply(this,arguments)}function we(){return(we=Object(u.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.functions.isApprovedForAll(B,I);case 2:if(n=e.sent,r=Object(x.a)(n,1),a=r[0],console.log(t.address,a),!1===a){e.next=8;break}throw new Error("Response to isApprovedForAll was not false, indicating that this is not an ERC721 contract");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={allowances:[],loading:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.inputAddress!==e.inputAddress&&this.loadData()}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,a,s,o,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token){e.next=2;break}return e.abrupt("return");case 2:if(this.props.inputAddress){e.next=4;break}return e.abrupt("return");case 4:return t=this.props.token,n=t.approvals.filter((function(e,n){return n===t.approvals.findIndex((function(t){return e.topics[3]===t.topics[3]}))})),r=t.approvalsForAll.filter((function(e,n){return n===t.approvalsForAll.findIndex((function(t){return e.topics[2]===t.topics[2]}))})),e.next=9,Promise.all(r.map(function(){var e=Object(u.a)(i.a.mark((function e(n){var r,a,s,o,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(k.getAddress)(Object(k.hexDataSlice)(n.topics[2],12)),e.next=3,t.contract.functions.isApprovedForAll(c.props.inputAddress,r);case 3:if(a=e.sent,s=Object(x.a)(a,1),s[0]){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.next=10,z(r,c.props.provider);case 10:return o=e.sent,u=q(c.props.chainId),e.next=14,ve(r,u,c.props.openSeaProxyAddress);case 14:return p=e.sent,e.abrupt("return",{spender:r,ensSpender:o,spenderAppName:p});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return a=e.sent,e.next=12,Promise.all(n.map(function(){var e=Object(u.a)(i.a.mark((function e(n){var r,a,s,o,u,p,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=4===n.topics.length?b.BigNumber.from(n.topics[3]):b.BigNumber.from(n.data),e.next=4,t.contract.functions.getApproved(r);case 4:if(a=e.sent,s=Object(x.a)(a,1),(o=s[0])!==B){e.next=9;break}return e.abrupt("return",void 0);case 9:return e.next=11,z(o,c.props.provider);case 11:return u=e.sent,p=q(c.props.chainId),e.next=15,ve(o,p,c.props.openSeaProxyAddress);case 15:return l=e.sent,e.abrupt("return",{spender:o,ensSpender:u,spenderAppName:l,index:r});case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",void 0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()));case 12:s=e.sent,o=[].concat(Object(ne.a)(s),Object(ne.a)(a)).filter((function(e){return void 0!==e})),this.setState({allowances:o,loading:!1});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"revoke",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.token){e.next=2;break}return e.abrupt("return");case 2:if(n=this.props.token.contract,void 0!==t.index){e.next=9;break}return e.next=6,n.functions.setApprovalForAll(t.spender,!1);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,n.functions.approve(B,t.index);case 11:r=e.sent;case 12:if(!r){e.next=19;break}return e.next=15,r.wait(1);case 15:console.debug("Reloading data"),a=function(e,t){return e.spender===t.spender&&(void 0===e.index&&void 0===t.index||String(e.index)===String(t.index))},s=this.state.allowances.filter((function(e){return!a(e,t)})),this.setState({allowances:s});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatAllowance",value:function(e){return e?"token ID ".concat(String(e)):"all tokens"}},{key:"render",value:function(){var e=this.props.token.balance;return"0"===String(e)&&0===this.state.allowances.length?null:a.a.createElement("tr",{className:"Token"},this.renderTokenOrLoading())}},{key:"renderTokenOrLoading",value:function(){return this.state.loading?a.a.createElement(ae.a,{size:20,color:"#000",loading:this.state.loading}):this.renderToken()}},{key:"renderToken",value:function(){return a.a.createElement("div",{className:"TokenContentDiv"},a.a.createElement("table",{className:"TokenContentTable"},a.a.createElement("tbody",null,this.renderAllowanceList())))}},{key:"renderTokenBalance",value:function(){var e=this.props.token,t=e.symbol,n=e.balance,r=e.contract,s="".concat(G(this.props.chainId),"/").concat(r.address);return a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",{className:"tokenName"},a.a.createElement("a",{href:s,style:{color:"white"}},t)),a.a.createElement("td",{className:"tokenValue"},String(n)))}},{key:"renderAllowanceList",value:function(){var e=this;a.a.createElement("img",{src:this.props.token.icon,alt:"",width:"40px",onError:function(e){e.target.src="erc721.png"}});if(0===this.state.allowances.length)return a.a.createElement("tr",null,a.a.createElement("td",{className:"tokenIconColumn721"}),a.a.createElement("td",{className:"tokenDataColumn"},a.a.createElement("table",{className:"tokenDataTable"},a.a.createElement("tbody",null,this.renderTokenBalance(),a.a.createElement("tr",{className:"spenderRow"},a.a.createElement("td",{className:"spenderRevoke"}),a.a.createElement("td",{className:"spenderAddress",colSpan:2},a.a.createElement("span",{className:"monospace"},"No Spenders")))))));var t=this.state.allowances.map((function(t,n){return e.renderAllowance(t,n)}));return a.a.createElement("tr",null,a.a.createElement("td",{className:"tokenIconColumn"}),a.a.createElement("td",{className:"tokenDataColumn"},a.a.createElement("table",{className:"tokenDataTable"},a.a.createElement("tbody",null,this.renderTokenBalance(),t))))}},{key:"renderAllowance",value:function(e,t){var n=e.spenderAppName||e.ensSpender||e.spender,r=e.spenderAppName||e.ensSpender||Z(e.spender),s=G(this.props.chainId),o=s?a.a.createElement("a",{className:"monospace",href:"".concat(s,"/").concat(e.spender)},r):r,c=s?a.a.createElement("a",{className:"monospace",href:"".concat(s,"/").concat(e.spender)},n):n;return a.a.createElement("tr",{className:"spenderRow"},a.a.createElement("td",{className:"spenderRevoke"},a.a.createElement(se.a,{inline:!0,className:"Allowance",key:e.spender}," ",this.renderRevokeButton(e))),a.a.createElement("td",{className:"spenderAddress"},a.a.createElement("span",{className:"AllowanceTextBigScreen"},c),a.a.createElement("span",{className:"AllowanceTextSmallScreen"},o)),a.a.createElement("td",{className:"spenderLimit"},a.a.createElement("span",{className:"monospace"}," ",this.renderAllowanceText(e))))}},{key:"renderAllowanceText",value:function(e){var t=e.spenderAppName||e.ensSpender||e.spender,n=e.spenderAppName||e.ensSpender||Z(e.spender),r=G(this.props.chainId),s=r?a.a.createElement("a",{className:"monospace",href:"".concat(r,"/").concat(e.spender)},n):n,o=r?a.a.createElement("a",{className:"monospace",href:"".concat(r,"/").concat(e.spender)},t):t;return a.a.createElement("div",null,a.a.createElement("span",{className:"AllowanceTextSmallScreen"},s),a.a.createElement("span",{className:"AllowanceTextSmallScreen"}," ",this.formatAllowance(e.index)," \u27a4 "),a.a.createElement("span",{className:"AllowanceTextBigScreen"},o),a.a.createElement("span",{className:"AllowanceTextBigScreen"}," ",this.formatAllowance(e.index)," \u27a4 "))}},{key:"renderRevokeButton",value:function(e){var t=this,n=this.props.inputAddress===this.props.signerAddress,r=a.a.createElement(oe.a,{size:"sm",disabled:!n,className:"RevokeButton",onClick:function(){return t.revoke(e)}});if(!n){var s=a.a.createElement(ce.a,{id:"revoke-tooltip-".concat(this.props.token.contract.address)},"You can only revoke allowances of the connected account");r=a.a.createElement(ie.a,{overlay:s},a.a.createElement("td",null,a.a.createElement("span",null,r)))}return r}}]),t}(r.Component),Ae=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={tokens:[],loading:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.inputAddress!==e.inputAddress&&this.loadData()}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,a,s,o,c,p,l,d,m=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.inputAddress){e.next=2;break}return e.abrupt("return");case 2:return this.setState({tokens:[],loading:!0}),t=new k.Interface(N),n=this.props.signer||this.props.provider,e.next=7,this.props.provider.getLogs({fromBlock:"earliest",toBlock:"latest",topics:[t.getEventTopic("Approval"),Object(k.hexZeroPad)(this.props.inputAddress,32)]});case 7:return r=e.sent,e.next=10,this.props.provider.getLogs({fromBlock:"earliest",toBlock:"latest",topics:[t.getEventTopic("ApprovalForAll"),Object(k.hexZeroPad)(this.props.inputAddress,32)]});case 10:return a=e.sent,e.next=13,this.props.provider.getLogs({fromBlock:"earliest",toBlock:"latest",topics:[t.getEventTopic("Transfer"),void 0,Object(k.hexZeroPad)(this.props.inputAddress,32)]});case 13:if(s=e.sent,o=[].concat(Object(ne.a)(r),Object(ne.a)(a),Object(ne.a)(s)),0!==(c=o.filter((function(e,t){return t===o.findIndex((function(t){return e.address===t.address}))})).map((function(e){return new b.Contract(Object(k.getAddress)(e.address),N,n)}))).length){e.next=19;break}return this.setState({loading:!1}),e.abrupt("return");case 19:return e.next=21,Promise.all(c.map(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.filter((function(e){return e.address===t.address})),s=r.filter((function(e){return e.address===t.address})),e.next=4,$(t.address,m.props.chainId,m.props.tokenMapping);case 4:return o=e.sent,c=!0,e.prev=6,e.next=9,he(t,m.props.inputAddress,m.props.tokenMapping);case 9:return u=e.sent,e.abrupt("return",Object(w.a)({},u,{icon:o,contract:t,registered:c,approvals:s,approvalsForAll:n}));case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()));case 21:return p=e.sent,l=p.filter((function(e){return void 0!==e})).sort((function(e,t){return e.symbol.localeCompare(t.symbol)})),e.next=25,ke(this.props.inputAddress,this.props.provider);case 25:d=e.sent,this.setState({openSeaProxyAddress:d,tokens:l,loading:!1});case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.loading)return a.a.createElement(ae.a,{css:"margin-bottom: 10px;",size:40,color:"#000",loading:this.state.loading});if(0===this.state.tokens.length)return a.a.createElement("div",{className:"TokenList"},"No token balances");var t=this.state.tokens.filter((function(t){return!e.props.filterRegisteredTokens||t.registered})).filter((function(t){return!e.props.filterZeroBalances||!("0"===String(t.balance))})).map((function(t){return a.a.createElement(xe,{key:t.contract.address,token:t,provider:e.props.provider,chainId:e.props.chainId,signer:e.props.signer,signerAddress:e.props.signerAddress,inputAddress:e.props.inputAddress,openSeaProxyAddress:e.state.openSeaProxyAddress})}));return a.a.createElement("table",{className:"TokenList"},a.a.createElement("tbody",null,t))}}]),t}(r.Component),Ee=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={tokenStandard:"ERC20",filterRegisteredTokens:!0,filterZeroBalances:!1,loading:!0},n.handleRegisteredCheckboxChange=function(e){return n.setState({filterRegisteredTokens:e.target.checked})},n.handleZeroBalancesCheckboxChange=function(e){return n.setState({filterZeroBalances:e.target.checked})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(this.props.chainId);case 2:t=e.sent,this.setState({tokenMapping:t,loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return e=this.props.chainId,[1,3,4,5,42,100,1e4,42161,43113,43114,62621].includes(e)?a.a.createElement("div",{className:"Dashboard"},a.a.createElement("div",{className:"controlDiv"},a.a.createElement("div",{className:"checkSwitches"},this.renderSelectionSwitch()),a.a.createElement("div",{className:"registrationCheckbox"},this.renderRegistrationCheckbox())),this.renderErc20TokenList()):a.a.createElement("div",{style:{paddingBottom:10}},"Network with chainId ",this.props.chainId," is not supported`");var e}},{key:"renderSelectionSwitch",value:function(){var e=this;return a.a.createElement("div",{className:"tokenSwitch",style:{marginBottom:"10px"}},a.a.createElement(g.a,{checked:"ERC20"===this.state.tokenStandard,onlabel:"MRC20",offlabel:"MRC721",onstyle:"primary",offstyle:"primary",width:100,onChange:function(t){return e.updateTokenStandard(t)}}))}},{key:"updateTokenStandard",value:function(e){e?this.setState({tokenStandard:"ERC20"}):this.setState({tokenStandard:"ERC721"})}},{key:"renderRegistrationCheckbox",value:function(){if("ERC721"!==this.state.tokenStandard&&(this.state.tokenMapping||1===this.props.chainId)){var e=1===this.props.chainId?"https://tokens.kleros.io/tokens":"https://tokenlists.org/";return a.a.createElement("div",null,"Filter out unregistered tokens",a.a.createElement("sup",null,a.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},"?")),a.a.createElement("input",{type:"checkbox",checked:this.state.filterRegisteredTokens,onChange:this.handleRegisteredCheckboxChange}))}}},{key:"renderZeroBalancesCheckbox",value:function(){return a.a.createElement("div",{className:"zeroBalances"},a.a.createElement("span",{style:{marginRight:5}},"Filter out zero balances"),a.a.createElement("input",{type:"checkbox",checked:this.state.filterZeroBalances,onChange:this.handleZeroBalancesCheckboxChange}))}},{key:"renderErc20TokenList",value:function(){return!this.props.inputAddress||this.state.loading?null:"ERC20"===this.state.tokenStandard?a.a.createElement(me,{provider:this.props.provider,chainId:this.props.chainId,signer:this.props.signer,signerAddress:this.props.signerAddress,inputAddress:this.props.inputAddress,filterRegisteredTokens:this.state.filterRegisteredTokens,filterZeroBalances:this.state.filterZeroBalances,tokenMapping:this.state.tokenMapping}):a.a.createElement(Ae,{provider:this.props.provider,chainId:this.props.chainId,signer:this.props.signer,signerAddress:this.props.signerAddress,inputAddress:this.props.inputAddress,filterRegisteredTokens:this.state.filterRegisteredTokens,filterZeroBalances:this.state.filterZeroBalances,tokenMapping:this.state.tokenMapping})}}]),t}(r.Component),Oe=n(238),Ne=n(79);var je=function(e){var t=e.signer,n=function(e){return{30:"RBTC",56:"BNB",97:"BNB",99:"POA",100:"xDAI",137:"MATIC",1e4:"BCH",43113:"AVAX",43114:"AVAX",80001:"MATIC"}[e]||"ETH"}(e.chainId),s=Object(r.useState)(function(e){return{ETH:"0.01",RBTC:"0.0002",BCH:"0.02",BNB:"0.2",POA:"300",xDAI:"10",MATIC:"150",AVAX:"0.25"}[e]}(n)),o=Object(x.a)(s,2),c=o[0],p=o[1],l=Object(r.useState)(!1),d=Object(x.a)(l,2),m=d[0],h=d[1],f=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||alert("Please connect your web3 wallet to donate"),e.prev=1,e.t0=t,e.next=5,t.getAddress();case 5:return e.t1=e.sent,e.t2=b.utils.parseEther(c),e.t3={to:"0xe126b3E5d052f1F575828f61fEBA4f4f2603652a",from:e.t1,value:e.t2},e.next=10,e.t0.sendTransaction.call(e.t0,e.t3);case 10:Ne.b.dark("Thanks for the donation!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),h(!1),e.next=18;break;case 14:e.prev=14,e.t4=e.catch(1),e.t4.code&&"INVALID_ARGUMENT"===e.t4.code&&alert("Input is not a valid number"),console.log(e.t4);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(oe.a,{variant:"outline-primary",onClick:function(){return h(!0)}},"Donate"),a.a.createElement(Oe.a,{show:m,onHide:function(){return h(!1)}},a.a.createElement(Oe.a.Header,{closeButton:!0},a.a.createElement(Oe.a.Title,null,"Donate to Revoke.cash")),a.a.createElement(Oe.a.Body,null,a.a.createElement(ue.a,null,a.a.createElement(se.a.Control,{value:c,onChange:function(e){return p(e.target.value)}}),a.a.createElement(ue.a.Append,null,a.a.createElement(ue.a.Text,null,n)),a.a.createElement(ue.a.Append,null,a.a.createElement(oe.a,{variant:"secondary",onClick:f},"Send")))),a.a.createElement(Oe.a.Footer,null,"Or contribute to my ",a.a.createElement("a",{href:"https://gitcoin.co/grants/259/rosco-kalis-crypto-software-engineer"},"Gitcoin Grant"))))},Te=n(236),Ce=n(237),Se=n(135),Be=(n(222),function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={showDonateModal:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectProvider();case 2:if(!window.ethereum&&!window.web3){e.next=10;break}return e.prev=3,e.next=6,this.connectSigner();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:window.ethereum&&(window.ethereum.on("chainChanged",(function(){return window.location.reload(!1)})),window.ethereum.on("accountsChanged",(function(){return window.location.reload(!1)})));case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"connectWeb3",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=9;break}return e.prev=1,e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:return e.next=11,this.connectSigner();case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"connectProvider",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=7;break}return t=new b.providers.Web3Provider(window.ethereum),e.next=4,this.updateProvider(t);case 4:console.log('Using injected "window.ethereum" provider'),e.next=27;break;case 7:if(!window.web3||!window.web3.currentProvider){e.next=14;break}return n=new b.providers.Web3Provider(window.web3.currentProvider),e.next=11,this.updateProvider(n);case 11:console.log('Using injected "window.web3" provider'),e.next=27;break;case 14:return e.prev=14,r=new b.providers.InfuraProvider("mainnet","88583771d63544aa".concat("ba1006382275c6f8")),'{"method":"eth_getCode","params":["0x1f9840a85d5af5bf1d1762f925bdaddc4201f984","latest"],"id":0,"jsonrpc":"2.0"}',e.next=19,v.a.post(r.connection.url,'{"method":"eth_getCode","params":["0x1f9840a85d5af5bf1d1762f925bdaddc4201f984","latest"],"id":0,"jsonrpc":"2.0"}');case 19:return e.next=21,this.updateProvider(r);case 21:console.log("Using fallback Infura provider"),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),console.log("No web3 provider available");case 27:case"end":return e.stop()}}),e,this,[[14,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateProvider",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNetwork();case 2:n=e.sent,137===(r=n.chainId)&&(t=new b.providers.WebSocketProvider("wss://rpc-mainnet.matic.quiknode.pro")),this.setState({provider:t,chainId:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectSigner",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,a,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum||window.web3){e.next=3;break}return alert("Please use a web3 enabled browser to use mtv.revoke"),e.abrupt("return");case 3:return n=null!==(t=window.ethereum)&&void 0!==t?t:window.web3.currentProvider,r=new b.providers.Web3Provider(n),a=r.getSigner(),e.next=8,a.getAddress();case 8:return s=e.sent,e.next=11,z(s,r);case 11:return o=e.sent,c=this.state.inputAddressOrName||o||s,e.next=15,this.parseInputAddress(c);case 15:u=e.sent,this.setState({signer:a,signerAddress:s,signerEnsName:o,inputAddressOrName:c,inputAddress:u});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInputAddressChanged",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,this.setState({inputAddressOrName:n}),e.next=4,this.parseInputAddress(n);case 4:(r=e.sent)&&this.setState({inputAddress:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseInputAddress",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.provider){e.next=4;break}return alert("Please use a web3 enabled browser to use mtv.revoke"),this.setState({inputAddressOrName:void 0}),e.abrupt("return");case 4:if(!t.endsWith(".eth")){e.next=15;break}return e.prev=5,e.next=8,this.state.provider.resolveName(t);case 8:return n=e.sent,e.abrupt("return",n||void 0);case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",void 0);case 15:return e.prev=15,e.abrupt("return",Object(k.getAddress)(t));case 19:return e.prev=19,e.t1=e.catch(15),e.abrupt("return",void 0);case 22:case"end":return e.stop()}}),e,this,[[5,12],[15,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement(Te.a,{fluid:!0,className:"App"},this.renderHeader(),this.renderAddressInput(),this.renderTokenList(),this.renderFooter(),this.renderToastContainer())}},{key:"renderHeader",value:function(){return a.a.createElement(Ce.a,{className:"Header"},a.a.createElement(Se.a,{className:"my-auto"},a.a.createElement("img",{className:"logo",src:"revoke.svg",alt:"mtv.revoke.ac logo"})))}},{key:"renderDonateButton",value:function(){if(this.state.chainId)return a.a.createElement(je,{signer:this.state.signer,chainId:this.state.chainId})}},{key:"renderConnectButton",value:function(){var e=this,t=this.state.signerAddress?this.state.signerEnsName||Z(this.state.signerAddress):"Connect web3";return a.a.createElement(oe.a,{style:{border:"1px solid white"},variant:"primary",onClick:function(){return e.connectWeb3()}},t)}},{key:"renderAddressInput",value:function(){var e=this,t=this.state.signerAddress?this.state.signerEnsName||this.state.signerAddress:"Connect web3";return a.a.createElement(Ce.a,{className:"AddressRow"},a.a.createElement(Se.a,{className:"my-auto",lg:"6",md:"12",sm:"12"},a.a.createElement(oe.a,{className:"web3Button my-auto AddressInput text-center",style:{width:"100%"},onClick:function(){return e.connectWeb3()}},t)))}},{key:"renderTokenList",value:function(){if(this.state.inputAddress)return a.a.createElement(Ee,{provider:this.state.provider,chainId:this.state.chainId,signer:this.state.signer,signerAddress:this.state.signerAddress,inputAddress:this.state.inputAddress})}},{key:"renderFooter",value:function(){return a.a.createElement("div",{className:"footer"},a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/0x13e/mtv.revoke",className:"cyanLink"},"GitHub Link")," | Forked from ",a.a.createElement("a",{href:"https://kalis.me/",className:"cyanLink"},"Rosco Kalis's")," (",a.a.createElement("a",{href:"https://github.com/rkalis/revoke.cash",className:"cyanLink"},"revoke.cash"),")",a.a.createElement("br",null),a.a.createElement("b",null,"Please consider donating to him if you find this useful")))}},{key:"renderToastContainer",value:function(){return a.a.createElement(Ne.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})}}]),t}(r.Component));n(223);o.a.render(a.a.createElement(Be,null),document.getElementById("root"))},95:function(e,t,n){}},[[140,1,2]]]);
//# sourceMappingURL=main.b283ee93.chunk.js.map